<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>

  <title>PostgreSQL 常见问题（FAQ）</title>
</head>



<body>

<h1> PostgreSQL 常见问题（FAQ） </h1>


<p> 最近更新：2007 年 1 月 30 日 星期二 17:37:01 EST <br/>
      中文版最近更新：2007 年 2 月 1 日 星期四 12:55:04 CST 
</p>
<p>   目前维护人员：Bruce Momjian (<a href="mailto:pgman@candle.pha.pa.us">pgman@candle.pha.pa.us</a>)<br/>
   中文版维护人员：Daojing.Zhou（<a href="mailto:doudou586@gmail.com">doudou586@gmail.com</a>）
</p>

<p>
   本文档的最新版本可以在
   <a href="http://www.postgresql.org/files/documentation/faqs/FAQ.html">http://www.postgresql.org/files/documentation/faqs/FAQ.html</a>查看。
</p>
<p>
   与操作系统平台相关的问题可在<a href="http://www.postgresql.org/docs/faq/">http://www.postgresql.org/docs/faq/</a>里找到答案。<br/>
</p>
<hr/>

<h2><a name="常见问题"></a> 常见问题 </h2>


<p>
<a href="#1.1">1.1</a>)PostgreSQL 是什么？该怎么发音？<br/>
<a href="#1.2">1.2</a>)谁控制和管理PostgreSQL ？<br/>
<a href="#1.3">1.3</a>)PostgreSQL的版权是什么？<br/>
<a href="#1.4">1.4</a>)PostgreSQL可以运行在哪些操作系统平台上？<br/>
<a href="#1.5">1.5</a>)我从哪里能得到PostgreSQL？<br/>

<a href="#1.6">1.6</a>)最新版的PostgreSQL 是什么？<br/>
<a href="#1.7">1.7</a>)我从哪里能得到对PostgreSQL 的支持？<br/>
<a href="#1.8">1.8</a>)我如何提交一个BUG报告？<br/>
<a href="#1.9">1.9</a>)我如何了解已知的 BUG 或暂缺的功能？<br/>
<a href="#1.10">1.10</a>)能够获取的最新文档有哪些？<br/>
<a href="#1.11">1.11</a>)我应该怎样学习 SQL ？<br/>

<a href="#1.12">1.12</a>)如何提交补丁或是加入开发队伍？<br/>
<a href="#1.13">1.13</a>)PostgreSQL 和其他数据库系统比起来如何？<br/>
<a href="#1.14">1.14</a>)PostgreSQL 可以处理最近各个国家夏时制的变化吗？<br/>
</p>

<h2><a name="用户客户端问题"></a> 用户客户端问题 </h2>
<p>
<a href="#2.1">2.1</a>)我们可以用什么语言和PostgreSQL 打交道？<br/>
<a href="#2.2">2.2</a>)有什么工具可以把PostgreSQL 用于 Web 页面？<br/>

<a href="#2.3">2.3</a>)PostgreSQL 拥有图形用户界面吗？<br/>
</p>

<h2><a name="系统管理问题"></a> 系统管理问题 </h2>
<p>
<a href="#3.1">3.1</a>)我怎样才能把PostgreSQL 装在 /usr/local/pgsql 以外的地方？<br/>
<a href="#3.2">3.2</a>)我如何控制来自其他电脑的连接？<br/>
<a href="#3.3">3.3</a>)我怎样调整数据库服务器以获得更好的性能？<br/>

<a href="#3.4">3.4</a>)PostgreSQL 里可以获得什么样的调试特性？<br/>
<a href="#3.5">3.5</a>)为什么在试图连接登录时收到“Sorry, too many clients” 消息？<br/>
<a href="#3.6">3.6</a>)PostgreSQL的升级过程有哪些内容？<br/>
<a href="#3.7">3.7</a>)(使用PostgreSQL)我需要使用什么计算机硬件 ？<br/>
</p>

<h2><a name="操作问题"></a> 操作问题 </h2>

<p>
<a href="#4.1">4.1</a>) 如何只选择一个查询结果的头几行？或是随机的一行？<br/>
<a href="#4.2">4.2</a>) 如何查看表、索引、数据库以及用户的定义？如何查看<i>psql</i>里用到的查询指令并显示它们？<br/>
<a href="#4.3">4.3</a>) 如何更改一个字段的数据类型？<br/>
<a href="#4.4">4.4</a>) 单条记录，单个表，一个数据库的最大限制是多少？<br/>
<a href="#4.5">4.5</a>) 存储一个典型的文本文件里的数据需要多少磁盘空间？<br/>

<a href="#4.6">4.6</a>) 为什么我的查询很慢？为什么这些查询没有利用索引？<br/>
<a href="#4.7">4.7</a>) 我如何才能看到查询优化器是怎样评估处理我的查询的？<br/>
<a href="#4.8">4.8</a>) 我怎样做正则表达式搜索和大小写无关的正则表达式查找？怎样利用索引进行大小写无关查找？<br/>
<a href="#4.9">4.9</a>) 在一个查询里，我怎样检测一个字段是否为 NULL？我如何才能准确排序而不论某字段是否含NULL值？<br/>
<a href="#4.10">4.10</a>) 各种字符类型之间有什么不同？<br/>
<a href="#4.11.1">4.11.1</a>) 我怎样创建一个序列号型或是自动递增的字段？<br/>

<a href="#4.11.2">4.11.2</a>) 我如何获得一个插入的序列号的值？<br/>
<a href="#4.11.3">4.11.3</a>) 同时使用 currval() 会导致和其他用户的冲突情况吗？<br/>
<a href="#4.11.4">4.11.4</a>) 为什么不在事务异常中止后重用序列号呢？为什么在序列号字段的取值中存在间断呢？<br/>
<a href="#4.12">4.12</a>) 什么是 OID？什么是 CTID ？<br/>
<a href="#4.13">4.13</a>) 为什么我收到错误信息“<i>ERROR: Memory exhausted in AllocSetAlloc()</i>”？<br/>

<a href="#4.14">4.14</a>) 我如何才能知道所运行的 PostgreSQL 的版本？<br/>
<a href="#4.15">4.15</a>) 我如何创建一个缺省值是当前时间的字段？<br/>
<a href="#4.16">4.16</a>) 如何执行外连接（outer join）查询？<br/>
<a href="#4.17">4.17</a>) 如何执行涉及多个数据库的查询？<br/>
<a href="#4.18">4.18</a>) 如何让函数返回多行或多列数据？<br/>
<a href="#4.19">4.19</a>) 为什么我在使用PL/PgSQL函数存取临时表时会收到错误信息“relation with OID ##### does not exist”？<br/>

<a href="#4.20">4.20</a>) 目前有哪些数据复制方案可用？<br/>
<a href="#4.21">4.21</a>) 为何查询结果显示的表名或列名与我的查询语句中的不同？为何大写状态不能保留？<br/>
</p>

<hr/>

<h2><a name="常见问题"></a> 常见问题 </h2>

<h3> <a name="1.1"></a>1.1)PostgreSQL 是什么？该怎么发音？ </h3>


<p>PostgreSQL 读作 <i>Post-Gres-Q-L</i>，有时候也简称为<i>Postgres</i> 。想听一下其发音的人员可从这里下载声音文件：
   <a href="http://www.postgresql.org/files/postgresql.mp3">MP3 格式</a> 。
</p>

<p>PostgreSQL 是面向目标的关系数据库系统，它具有传统商业数据库系统的所有功能，同时又含有将在下一代 DBMS 系统的使用的增强特性。PostgreSQL 是自由免费的，并且所有源代码都可以获得。
</p>

<p>PostgreSQL 的开发队伍主要为志愿者，他们遍布世界各地并通过互联网进行联系，这是一个社区开发项目，它不被任何公司控制。
   如想加入开发队伍，请参见开发人员常见问题（FAQ）
   <a href="http://www.postgresql.org/files/documentation/faqs/FAQ_DEV.html">http://www.postgresql.org/files/documentation/faqs/FAQ_DEV.html</a>

</p>

<h3> <a name="1.2"></a>1.2) 谁控制PostgreSQL ？ </h3>
<p>
   如果你在寻找PostgreSQL的掌门人，或是什么中央委员会，或是什么所属公司，你只能放弃了---因为一个也不存在，但我们的确有一个
   核心委员会和CVS管理组，但这些工作组的设立主要是为了进行管理工作而不是对PostgreSQL进行独占式控制，PostgreSQL项目是由任何人均
   可参加的开发人员社区和所有用户控制的，你所需要做的就是订阅邮件列表，参与讨论即可（要参与PostgreSQL的开发详见
   <a href="http://www.postgresql.org/docs/faqs.FAQ_DEV.html"> 开发人员常问题 (Developer's FAQ) </a>获取信息）。
</p>


<h3> <a name="1.3"></a>1.3)PostgreSQL的版权是什么? </h3>


<p>PostgreSQL的发布遵从经典的BSD版权。它允许用户不限目的地使用PostgreSQL，甚至你可以销售PostgreSQL而不含源代码也可以，唯一的限制就是你不能因软件自身问题而向我们追诉法律责任，另外就是要求所有的软件拷贝中须包括以下版权声明。下面就是我们所使用的BSD版权声明内容：</p>

<p>PostgreSQL数据库管理系统</p>

<p>   部分版权（c）1996-2005，PostgreSQL 全球开发小组，部分版权（c）1994-1996 加州大学董事</p>

<p>   （Portions copyright (c) 1996-2005,PostgreSQL Global Development Group Portions Copyright (c) 1994-6 Regents of the University of California）</p>

<p>
   允许为任何目的使用，拷贝，修改和分发这个软件和它的文档而不收取任何费用，
   并且无须签署因此而产生的证明，前提是上面的版权声明和本段以及下面两段文字出现在所有拷贝中。

</p>

<p>
   （Permission to use, copy, modify, and distribute this software and its           
   documentation for any purpose, without fee, and without a written agreement is           
   hereby granted, provided that the above copyright notice and this paragraph and           
   the following two paragraphs appear in all copies.）
</p>

<p>
   在任何情况下，加州大学都不承担因使用此软件及其文档而导致的对任何当事人的直接的，
   间接的，特殊的，附加的或者相伴而生的损坏，包括利益损失的责任，即使加州大学已经建议了这些损失的可能性时也是如此。
</p>

<p>
   （IN NO EVENT SHALL THE UNIVERSITY OF CALIFORNIA BE LIABLE TO ANY PARTY FOR           
   DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, INCLUDING LOST           
   PROFITS, ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF           
   THE UNIVERSITY OF CALIFORNIA HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH           
   DAMAGE.）
</p>


<p>
   加州大学明确放弃任何保证，包括但不局限于某一特定用途的商业和利益的隐含保证。
   这里提供的这份软件是基于“当作是”的基础的，因而加州大学没有责任提供维护，支持，更新，增强或者修改的服务。
</p>

<p>
   （THE UNIVERSITY OF CALIFORNIA SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING, BUT           
   NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A           
   PARTICULAR PURPOSE. THE SOFTWARE PROVIDED HEREUNDER IS ON AN "AS IS" BASIS, AND           
   THE UNIVERSITY OF CALIFORNIA HAS NO OBLIGATIONS TO PROVIDE MAINTENANCE,           
   SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS.）<br/>          

</p>

<h3> <a name="1.4"></a>1.4)PostgreSQL 可以运行在哪些操作系统平台上？ </h3>

<p>   一般说来，任何现在对 UNIX 兼容的操作系统之上都能运行PostgreSQL 。在安装指南里列出了发布时经过明确测试的平台。</p>


<p>PostgreSQl也可以直接运行在基于微软Windows-NT的操作系统，如Win2000 SP4，WinXP 和 Win2003，已制作完成的安装包可从
   <a href="http://pgfoundry.org/projects/pginstaller">http://pgfoundry.org/projects/pginstaller</a>下载，基于MSDOS的Windows操作系统
   （Win95，Win98，WinMe）需要通过Cygwin模拟环境运行PostgreSQL。
</p>

<p>
  同时也有一个为Novell Netware 6开发的版本可从 <a href="http://forge.novell.com" target="_top">http://forge.novell.com</a>获取，为OS/2(eComStation)开发的版本可从
  <a href="http://hobbes.nmsu.edu/cgi-bin/h-search?sh=1&amp;button=Search&amp;key=postgreSQL&amp;stype=all&amp;sort=type&amp;dir=%2F" target="_top">http://hobbes.nmsu.edu/cgi-bin/h-search?sh=1&amp;button=Search&amp;key=postgreSQL&amp;stype=all&amp;sort=type&amp;dir=%2F</a> 下载。

</p>

<h3> <a name="1.5"></a>1.5) 我从哪里能得到PostgreSQL？ </h3>

<p>
  通过浏览器可从<a href="http://www.postgresql.org/ftp/">http://www.postgresql.org/ftp/</a>下载，也可通过FTP，从
  <a href="ftp://ftp.PostgreSQL.org/pub/">ftp://ftp.PostgreSQL.org/pub/</a>站点下载。
</p>

<h3> <a name="1.6"></a>1.6) 最新版的PostgreSQL是什么？ </h3>


<p>PostgreSQL 最新的版本是版本 8.2.1 。</p>

<p>我们计划每年发布一个主要升级版本，每几个月发布一个小版本。</p>


<h3> <a name="1.7"></a>1.7) 我从哪里能得到对PostgreSQL的支持？ </h3>

<p>PostgreSQL社区通过邮件列表为其大多数用户提供帮助，订阅邮件列表的主站点是 <a href="http://www.postgresql.org/community/lists/" target="_top">http://www.postgresql.org/community/lists/</a>，一般情况下，先加入<i>General</i> 或 <i>Bug</i>邮件列表是一个较好的开始。
</p>

<p>
   主要的IRC频道是在FreeNode(<i>irc.freenode.net</i>)的<i>#postgresql</i>，为了连上此频道，可以使用UNIX程序irc，其指令格式：
   irc -c '#postgresql' "$USER" irc.freenode.net ，或者使用其他IRC客户端程序。在此网络中还存在一个PostgreSQL的西班牙频道(<i>#postgersql-es</i>)和法语频道
   (<i>#postgresql-fr</i>)。同样地，在EFNET上也有一个PostgreSQL的交流频道。
</p>

<p>
   可提供商业支持的公司列表可在<a href="http://techdocs.postgresql.org/companies.php" target="_top">http://techdocs.postgresql.org/companies.php</a>浏览。

</p>



<h3> <a name="1.8"></a>1.8) 我如何提交一个BUG报告？ </h3>

<p>
   可访问 <a href="http://www.postgresql.org/support/submitbug">http://www.postgresql.org/support/submitbug</a>，填写Bug上报表格即可，同样也可访问ftp站点<a href="ftp://ftp.PostgreSQL.org/pub/">ftp://ftp.PostgreSQL.org/pub/</a> 检查有无更新的PostgreSQL版本或补丁。
</p>


<p>
通过使用Bug提交表格或是发往PostgreSQL邮件列表的Bug通常会有以下之一回复：
</p>

<ul>
<li>所提交内容不是一个Bug及其不是Bug的原因。</li>
<li>所提交内容是一个已知的Bug并且已经加入TODO待处理任务列表。</li>
<li>所提交的Bug已在当前版本中被修正。</li>
<li>所提交的Bug已修正但尚未将补丁加入现在的发布软件包。</li>
<li>请求提交者提供更详细的信息：
   <ul>
   <li>操作系统</li>

   <li>PostgreSQL版本</li>
   <li>可重现Bug的测试案例</li>
   <li>调试信息</li>
   <li>调试跟踪输出</li>
   </ul>
</li>
<li>所提交内容是一个新Bug，将执行以下工作：
   <ul>

   <li>创建一个新补丁并将其加入下一个主要版本或是小的改进版本中。</li>
   <li>此Bug暂时不能修正，将被加至TODO待处理任务列表。</li>
   </ul>
</li>
</ul>


<h3> <a name="1.9"></a>1.9) 我如何了解已知的 BUG 或暂缺的功能？ </h3>
<p>PostgreSQL 支持一个扩展的 SQL:2003 的子集。参阅我们的<a href="http://www.postgresql.org/docs/faqs.TODO.html">TODO</a> 列表，了解已知Bug列表、暂缺的功能和将来的开发计划。

</p>

<p>要求增加新功能的申请通常会收到以下之一的回复：</p>

<ul>
<li>该功能已加入TODO待处理任务列表。</li>
<li>该功能不是必须的，因为：
   <ul>
   <li>它是现有的且符合SQL标准的某功能的重复。</li>
   <li>该功能性会大大增加代码的复杂程序，而带来的好处是微不足道的。</li>
   <li>该功能是不安全或是不可靠的。</li>

   </ul>
</li>
<li>该功能将被加入TODO待处理任务列表。</li>
</ul>

<p>
PostgreSQL不使用Bug跟踪系统，因为我们发现在邮件列表中直接回复以及保证TODO任务列表总是处于最新状态的方式工作效率会更高一些。事实上，Bug不会在我们的软件中存在很长时间，
对影响很多用户的Bug也总是很快会被修正。唯一能找到所有改进、提高和修正的地方是CVS的日志信息，即使是在软件新版本的发布信息中也不会列出每一处的软件更新。
</p>



<h3> <a name="1.10"></a>1.10) 能够获取的最新文档有哪些？ </h3>


<p>PostgreSQL包含大量的文档，主要有详细的参考手册，手册页和一些的测试例子。参见 /doc 目录（译注：应为 $PGHOME/doc）。
   你还可以在线浏览PostgreSQL的手册，其网址是：<a href="http://www.PostgreSQL.org/docs">http://www.PostgreSQL.org/docs</a>。
</p>

<p>
   有两本关于PostgreSQL的书在线提供，在
   <a href="http://www.PostgreSQL.org/docs/awbook.html">http://www.PostgreSQL.org/docs/awbook.html</a>
   和 <a href="http://www.commandprompt.com/ppbook/">http://www.commandprompt.com/ppbook/</a> 。
   也有大量的PostgreSQL书籍可供购买，其中最为流行的一本是由Korry Douglas编写的。在 
   <a href="http://techdocs.PostgreSQL.org/techdocs/bookreviews.php">http://techdocs.PostgreSQL.org/techdocs/bookreviews.php</a>上
   上有大量有关PostgreSQL书籍的简介。
   在 <a href="http://techdocs.PostgreSQL.org/">http://techdocs.PostgreSQL.org/</a>上收集了有关PostgreSQL的大量技术文章。

</p>

<p>
   客户端的命令行程序<i>psql</i>有一些以 \d 开头的命令，可显示关于类型，操作符，函数，聚合等信息，使用 \? 可以显示所有可用的命令。
</p>

<p>
   我们的 web 站点包含更多的文档。
</p>



<h3> <a name="1.11"></a>1.11) 我应该怎样学习 SQL ？ </h3>

<p>
   首先考虑上述提到的与PostgreSQL相关的书籍，另外一本是<i>Teach Yourself SQL in 21 Days, Second Edition</i>，其详细介绍的网址是 
   <a href="http://members.tripod.com/er4ebus/sql/index.htm">http://members.tripod.com/er4ebus/sql/index.htm</a>，
   我们的许多用户喜欢<i>The Practical SQL Handbook</i>， Bowman, Judith S. 编写，Addison-Wesley公司出版，其他的则喜欢
   <i>The Complete Reference SQL</i>, Groff 编写，McGraw-Hill公司出版。
</p>

<p>在下列网址上也有很好的教程，他们是</p>
<ul>
<li><a href="http://www.intermedia.net/support/sql/sqltut.shtm">http://www.intermedia.net/support/sql/sqltut.shtm</a></li>
<li><a href="http://sqlcourse.com/">http://sqlcourse.com.</a></li>
<li><a href="http://www.w3schools.com/sql/default.asp">http://www.w3schools.com/sql/default.asp</a></li>
<li><a href="http://mysite.verizon.net/Graeme_Birchall/id1.html">http://mysite.verizon.net/Graeme_Birchall/id1.html</a></li>
</ul>



<h3> <a name="1.12"></a>1.12)如何提交补丁或是加入开发队伍？ </h3>
<p>
   详见<a href="http://www.postgresql.org/docs/faqs.FAQ_DEV.html"> 开发人员常见问题 (Developer's FAQ) </a>。

</p>


<h3> <a name="1.13"></a>1.13)PostgreSQL和其他数据库系统比起来如何？ </h3>

<p>
评价软件有好几种方法：功能，性能，可靠性，支持和价格。
</p>

<dl>
   <dt><b>功能</b></dt>
   <dd>PostgreSQL 拥有大型商用数据库最多的功能，例如：事务，子查询，触发器，视图，外键参考完整性和复杂的锁定等。
      我们还有一些它们没有的特性，如用户定义类型，继承，规则和多版本并行控制以减少锁的争用等。<br/>

   </dd>

   <dt><b>性能</b></dt>
   <dd>PostgreSQL和其他商用和开源的数据库具有类似的性能。对某些处理它比较快，对其他一些处理它比较慢。
      与其他数据库相比，我们的性能优劣通常在 +/- 10%之间。<br/>
   </dd>

   <dt><b>可靠性</b></dt>
   <dd>

      我们都知道数据库必须是可靠的，否则它就一点用都没有。我们努力做到发布经过认真测试的，缺陷最少的稳定代码。每个版本至少有一个月的 beta
      测试时间，并且我们的发布历史显示我们可以提供稳定的，牢固的，可用于生产使用的版本。我们相信在这方面我们与其他的数据库软件是相当的。<br/>
   </dd>

   <dt><b>支持</b></dt>
    <dd>
      我们的邮件列表提供一个非常大的开发人员和用户的组以帮助解决所碰到的任何问题。我们不能保证总是能解决问题，相比之下，商用数据库软件也并不是总能够提供解决方法。
      直接与开发人员，用户群，手册和源程序接触使PostgreSQL的支持比其他数据库还要好。还有一些商业性的全面技术支持，可以给提供给那些需要的人。（参阅1.7 小节）<br/>
    </dd>


    <dt><b>价格</b></dt>
    <dd>
      我们对任何用途都免费，包括商用和非商用目的。
      你可以不加限制地向你的产品里加入我们的代码，除了那些我们在上面的版权声明里声明的 BSD版权之外的内容。
    </dd>

</dl>


<h3><a name="1.14"></a>1.14) PostgreSQL可以处理最近各个国家夏时制的变化吗?</h3>
 	 
<p>PostgreSQL 8.0之前的版本是使用操作系统中的时区数据库来处理夏时制的信息，自8.0版及以后的版本PostgreSQL会自身含有最新的时区信息。</p>


<hr/>


<h2><a name="用户客户端问题"></a> 用户客户端问题 </h2>


<h3> <a name="2.1"></a>2.1) 我们可以用什么语言和PostgreSQL打交道？ </h3>

<p>PostgreSQL(缺省情况)只安装有C和内嵌式C的接口，其他的接口都是独立的项目，能够分别下载，这些接口项目独立的好处
   是他们可以有各自的发布计划和各自独立的开发组。
</p>
<p>
   一些编程语言如PHP都有访问PostgreSQL的接口，Perl、TCL、Python以及很多其他语言的接口在
   <a href="http://gborg.postgresql.org" target="_top">http://gborg.postgresql.org</a>网站上的<i>Drivers/Interfaces</i>小节可找到，
   并且通过Internet很容易搜索到。
</p>




<h3> <a name="2.2"></a>2.2) 有什么工具可以把PostgreSQL用于 Web 页面？ </h3>
<p>
   一个介绍以数据库为后台的挺不错的站点是：<a href="http://www.webreview.com">http://www.webreview.com</a>。
</p>
<p>
   对于 Web 集成，PHP 是一个极好的接口。它在<a href="http://www.php.net/">http://www.php.net/</a>。

</p>
<p>
   对于复杂的任务，很多人采用 Perl 接口和 使用CGI.pm的DBD::Pg 或 mod_perl 。
</p>


<h3> <a name="2.3"></a>2.3)PostgreSQL拥有图形用户界面吗？ </h3>
<p>
   商业用户或是开源开发人员能找到很多的有关PostgreSQL的GUI图形工具软件，在 <a href="http://www.postgresql.org/docs/techdocs.54">PostgreSQL社区文档</a>有一个详细的列表。
</p>


<hr/>



<h2><a name="系统管理问题"></a> 系统管理问题 </h2>

<h3> <a name="3.1"></a>3.1)我怎样能把PostgreSQL装在 /usr/local/pgsql 以外的地方？ </h3>
<p>
   在运行 configure 时加上 --prefix 选项。
</p>



<h3> <a name="3.2"></a>3.2) 我如何控制来自其他电脑的连接？ </h3>
<p>
   缺省情况下，PostgreSQL只允许来自本机且通过 unix 域套接字或TCP/IP方式的连接。
   你只有在修改了配置文件<i>postgresql.conf</i>中的<i>listen_addresses</i>，且也在配置文件<i>$PGDATA/pg_hba.conf</i>中打开了
   基于远程电脑（ host-based ）的身份认证，并重新启动PostgreSQL，否则其他电脑是不能与你的PostgreSQL服务器进行连接的。
</p>


<h3> <a name="3.3"></a>3.3) 我怎样调整数据库引擎以获得更好的性能？ </h3>


<p>
   有三个主要方面可以提升PostgreSQL的潜能。
</p>

<dl>
   <dt><b>查询方式的变化</b></dt>
   <dd>
      这主要涉及修改查询方式以获取更好的性能:
      <ul>
      <li>创建索引，包括表达式和部分索引；</li>

      <li>使用COPY语句代替多个Insert语句；</li>
      <li>将多个SQL语句组成一个事务以减少提交事务的开销；</li>
      <li>从一个索引中提取多条记录时使用CLUSTER；</li>
      <li>从一个查询结果中取出部分记录时使用LIMIT；</li>
      <li>使用预编译式查询（Prepared Query)；</li>
      <li>使用ANALYZE以保持精确的优化统计；</li>

      <li>定期使用 VACUUM 或 <i>pg_autovacuum</i></li>
      <li>进行大量数据更改时先删除索引（然后重建索引）</li>
      </ul>
   </dd>

   <dt><b>服务器的配置</b></dt>
   <dd>

      配置文件<i>postgres.conf</i>中的很多设置都会影响性能，所有参数的列表可见：
      <a href="http://www.postgresql.org/docs/current/static/runtime.html">管理员指南/数据库服务器运行环境/数据库服务器运行配置</a>，
      有关参数的解释可见：<a href="http://www.varlena.com/varlena/GeneralBits/Tidbits/annotated_conf_e.html" target="_top">http://www.varlena.com/varlena/GeneralBits/Tidbits/annotated_conf_e.html</a> 和 
      <a href="http://www.varlena.com/varlena/GeneralBits/Tidbits/perf.html">http://www.varlena.com/varlena/GeneralBits/Tidbits/perf.html</a>。
   </dd>

   <dt><b>硬件的选择</b></dt>

   <dd>
      计算机硬件对性能的影响可浏览 
      <a href="http://candle.pha.pa.us/main/writings/pgsql/hw_performance/index.html" target="_top">http://candle.pha.pa.us/main/writings/pgsql/hw_performance/index.html</a> 和 
      <a href="http://www.powerpostgresql.com/PerfList/">http://www.powerpostgresql.com/PerfList/</a>。
   </dd>

</dl>


<h3> <a name="3.4"></a>3.4)PostgreSQL里可以获得什么样的调试特性？ </h3>


<p>PostgreSQL 有很多类似<code> log_* </code>的服务器配置变量可用于查询的打印和进程统计，而这些工作对调试和性能测试很有帮助。
</p>



<h3> <a name="3.5"></a>3.5) 为什么在试图连接时收到“Sorry, too many clients（已有太多用户连接）”消息？ </h3>
<p>
   这表示你已达到缺省100个并发后台进程数的限制，你需要通过修改<i>postgresql.conf</i>文件中的<i>max_connections</i>值来
   增加postmaster的后台并发处理数，修改后需重新启动<i>postmaster</i>。

</p>


<h3> <a name="3.6"></a>3.6)PostgreSQL的升级过程有哪些内容 ？ </h3>
<p>
 PostgreSQL 开发组对每次小版本的升级主要只做了一些Bug修正工作，因此从 7.4.8 升级到 7.4.9 不需要 dump 和 restore，仅需要停止数据库服务器，安装更新后的软件包，然后重启服务器即可。
</p>
<p>
   所有PostgreSQL的用户应该在最接近（你所使用的主版本）的小改进版本发布尽快升级。尽管每次升级可能都有一点风险，PostgreSQL的小改进版仅仅是设计用来修正一些Bug的，代码改动较少，所以风险还是很小的。PostgreSQL社区认为一般情况下不升级的风险还是多于升级的。
</p>
<p>
   主版本的升级（例如从 7.3 到 7.4）通常会修改系统表和数据表的内部格式。
   这些改变一般比较复杂，因此我们不维持数据文件的向后兼容性。因此从老版本中进行数据导出（dump）/然后在新版本中进行数据导入（reload）对主版本的升级是必须的。

</p>

<h3> <a name="3.7"></a>3.7)(使用PostgreSQL)我需要使用什么计算机硬件 ？ </h3>
<p>
   由于计算机硬件大多数是兼容的，人们总是倾向于相信所有计算机硬件质量也是相同的。事实上不是，
   ECC RAM（带奇偶校验的内存），SCSI （硬盘）和优质的主板比一些便宜货要更加可靠且具有更好的性能。PostgreSQL几乎可以运行在任何硬件上，
   但如果可靠性和性能对你的系统很重要，你就需要全面的研究一下你的硬件配置了。在我们的邮件列表上也有关于
   硬件配置和性价比的讨论。
</p>


<hr/>

<h2><a name="操作问题"></a> 操作问题 </h2>



<h3> <a name="4.1"></a>4.1) 如何只选择一个查询结果的头几行？或是随机的一行？ </h3>
<p>
      如果你只是要提取几行数据，并且你在执行查询中知道确切的行数，你可以使用LIMIT功能。
      如果有一个索引与 <i> ORDER BY</i>中的条件匹配，PostgreSQL 可能就只处理要求的头几条记录，
      （否则将对整个查询进行处理直到生成需要的行）。如果在执行查询功能时不知道确切的记录数，
      可使用游标(cursor)和FETCH功能。
</p>
<p>
      可使用以下方法提取一行随机记录的：
</p>
<pre>
      SELECT  cols
      FROM tab
      ORDER BY random()
      LIMIT 1 ;

</pre>



<h3> <a name="4.2"></a>4.2) 如何查看表、索引、数据库以及用户的定义？如何查看<i>psql</i>里用到的查询指令并显示它们？ </h3>
<p>
   在<i>psql</i>中使用 \dt 命令来显示数据表的定义，要了解<i>psql</i>中的完整命令列表可使用\? ，另外，你也可以阅读 <i>psql</i> 的源代码
   文件<i>pgsql/src/bin/psql/describe.c</i>，它包括为生成<i>psql</i>反斜杠命令的输出的所有 SQL 命令。你还可以带 <i>-E</i> 选项启动 <i>psql</i>，
   这样它将打印出你在<i>psql</i>中所给出的命令执行时的内部实际使用的SQL查询语句。PostgreSQL也提供了一个兼容SQL的INFORMATION SCHEMA接口，
   你可以从这里获取关于数据库的信息。

</p>
<p>
   在系统中也有一些以<i>pg_</i> 打头的系统表也描述了表的定义。
</p>
<p>
   使用 <i>psql -l</i> 指令可以列出所有的数据库。
</p>
<p>
   也可以浏览一下 <i>pgsql/src/tutorial/syscat.source</i>文件，它列举了很多可从数据库系统表中获取信息的SELECT语法。

</p>


<h3> <a name="4.3"></a>4.3) 如何更改一个字段的数据类型？ </h3>
<p>
   在8.0版本里更改一个字段的数据类型很容易，可使用 ALTER TABLE ALTER COLUMN TYPE 。
</p>
<p>
   在以前的版本中，可以这样做：
</p>
<pre>
   BEGIN;
    ALTER TABLE tab ADD COLUMN new_col new_data_type;
    UPDATE tab SET new_col = CAST(old_col AS new_data_type);
    ALTER TABLE tab DROP COLUMN old_col;
    COMMIT;

</pre>
<p>
   你然后可以使用<i>VACUUM FULL tab </i>指令来使系统收回无效数据所占用的空间。
</p>

<h3> <a name="4.4"></a>4.4) 单条记录，单个表，单个数据库的最大限制是多少？ </h3>
<p>
   下面是一些限制：
</p>
<blockquote>
   <table>

   <tbody>
      <tr><td>单个数据库最大尺寸？</td><td>无限制（已存在有 32TB 的数据库）</td></tr>
      <tr><td>单个表的最大尺寸？</td><td>32 TB</td></tr>
      <tr><td>一行记录的最大尺寸？</td><td>1.6 TB</td></tr>
      <tr><td>一个字段的最大尺寸?</td><td>1 GB</td></tr>

      <tr><td>一个表里最大行数？</td><td>无限制</td></tr>
      <tr><td>一个表里最大列数？</td><td>250-1600 （与列类型有关）</td></tr>
      <tr><td>一个表里的最大索引数量？</td><td>无限制</td></tr>
   </tbody>
</table>
</blockquote>


<p>
   当然，实际上没有真正的无限制，还是要受可用磁盘空间、可用内存/交换区的制约。
   事实上，当上述这些数值变得异常地大时，系统性能也会受很大影响。
</p>

<p>
   单表的最大大小  32 TB 不需要操作系统对单个文件也需这么大的支持。大表用多个 1 GB 的文件存储，因此文件系统大小的限制是不重要的。
</p>
<p>
   如果缺省的块大小增长到 32K ，最大的单表大小和最大列数还可以增加到四倍。
</p>
<p>
   有一个限制就是不能对大小多于2000字节的列创建索引。幸运地是这样的索引很少用到。通过对多字节列的内容进行MD5哈稀运算结果进行函数索引可对列的唯一性得到保证，
   并且全文检索允许对列中的单词进行搜索。
</p>


<h3> <a name="4.5"></a>4.5) 存储一个典型的文本文件里的数据需要多少磁盘空间？ </h3>
<p>
   一个 Postgres 数据库（存储一个文本文件）所占用的空间最多可能需要相当于这个文本文件自身大小5倍的磁盘空间。
</p>
<p>
   例如，假设有一个 100,000 行的文件，每行有一个整数和一个文本描述。
   假设文本串的平均长度为20字节。文本文件占用 2.8 MB。存放这些数据的PostgreSQL数据库文件大约是 6.4 MB:
</p>
<pre>
     28 字节: 每行的头（大约值）
     24 字节: 一个整数型字段和一个文本型字段
   +  4 字节: 页面内指向元组的指针
   ----------------------------------------
     56 字节每行

   PostgreSQL 数据页的大小是 8192 字节 (8 KB)，则：

   8192 字节每页
   -------------------   =  146 行/数据页（向下取整）
     56 字节每行

   100000 数据行
   --------------------  =  685 数据页（向上取整）
      146 行/数据页

   685 数据页 * 8192 字节/页  = 5,611,520 字节（5.6 MB）
</pre>


<p>
   索引不需要这么多的额外消耗，但也确实包括被索引的数据，因此它们也可能很大。
</p>
<p>
   空值<i>NULL</i>存放在位图中，因此占用很少的空间。
</p>

<h3> <a name="4.6"></a>4.6) 为什么我的查询很慢？为什么这些查询没有利用索引？ </h3>
<p>
   并非每个查询都会自动使用索引。只有在表的大小超过一个最小值，并且查询只会选中表中较小比例的记录时才会采用索引。
   这是因为索引扫描引起的随即磁盘存取可能比直接地读取表（顺序扫描）更慢。

</p>
<p>
   为了判断是否使用索引，PostgreSQL必须获得有关表的统计值。这些统计值可以使用 VACUUM ANALYZE，或 ANALYZE 获得。
   使用统计值，优化器知道表中有多少行，就能够更好地判断是否利用索引。
   统计值对确定优化的连接顺序和连接方法也很有用。在表的内容发生变化时，应定期进行统计值的更新收集。
</p>
<p>
   索引通常不用于 ORDER BY 或执行连接。对一个大表的一次顺序扫描再做一次排序通常比索引扫描要快。然而，如果将 LIMIT 和 ORDER BY 
   结合在一起使用的话，通常将会使用索引，因为这时仅返回表中的一小部分记录。
</p>
<p>
   如果你确信PostgreSQL的优化器使用顺序扫描是不正确的，你可以使用<code>SET enable_seqscan TO 'off'</code>指令来关闭顺序扫描，
   然后再次运行查询，你就可以看出使用一个索引扫描是否确实要快一些。
</p>

<p>

   当使用通配符操作，例如 <i>LIKE</i> 或 <i>~</i> 时，索引只能在特定的情况下使用：
</p>
<ul>
   <li>字符串的开始部分必须是普通字符串，也就是说：
      <ul>
      <li> <i>LIKE</i> 模式不能以 <i>%</i> 打头。</li>

      <li> <i>~</i> （正则表达式）模式必须以 <i>^</i> 打头。</li>
      </ul>
   </li>
   <li>字符串不能以匹配多个字符的模式类打头，例如 [a-e]。</li>
   <li>大小写无关的查找，如 ILIKE 和 ~* 等不使用索引，但可以用 <a href="#4.8">4.8</a> 节描述的表达式索引。</li>

   <li>在做 initdb 时必须采用缺省的本地设置 C locale，因为系统不可能知道在非C locale情况时下一个最大字符是什么。
      在这种情况下，你可以创建一个特殊的<code>text_pattern_ops</code>索引来用于<small>LIKE</small>的索引。
   </li>
</ul>
<p>
   在8.0之前的版本中，除非要查询的数据类型和索引的数据类型相匹配，否则索引经常是未被用到，特别是对int2,int8和数值型的索引。
</p>

<h3> <a name="4.7"></a>4.7) 我如何才能看到查询优化器是怎样评估处理我的查询？ </h3>


<p>参考 <small>EXPLAIN</small> 手册页。</p>

<h3> <a name="4.8"></a>4.8) 我怎样做正则表达式搜索和大小写无关的正则表达式查找？怎样利用索引进行大小写无关查找？ </h3>
<p>
   操作符 <i> ~ </i> 处理正则表达式匹配，而 <i>~*</i> 处理大小写无关的正则表达式匹配。大小写无关的 LIKE 变种成为 ILIKE。

</p>
<p>
   大小写无关的等式比较通常写做：
</p>
<pre>
    SELECT *
    FROM tab
    WHERE lower(col) = 'abc';
</pre>

<p>
   这样将不会使用标准的索引。但是可以创建一个在这种情况下使用的表达式索引:
</p>
<pre>
    CREATE INDEX tabindex ON tab (lower(col));

</pre>
<p>
   如果上述索引在创建时加入UNIQUE约束，虽然索引字段自身内容可以存储大小写不限的内容，但如果有UNIQUE约束后，这些内容不能仅仅是大小写不同（否则会造成冲突）。为了保证不发生这种情况，可以使用CHECK约束条件或是触发器在录入时进行限制。
</p>


<h3> <a name="4.9"></a>4.9) 在一个查询里，我怎样检测一个字段是否为 <i>NULL</i> ？我如何才能准确排序而不论某字段是否含 <i>NULL</i> 值？ </h3>
<p>

   用 <small>IS NULL</small> 和 <small>IS NOT NULL</small> 测试这个字段，具体方法如下：
</p>
<pre>   SELECT *
   FROM tab
   WHERE col IS NULL;
</pre>

<p>为了能对含 <small>NULL</small>字段排序，可在 <small>ORDER BY</small> 条件中使用 <small>IS NULL</small>和
   <small>IS NOT NULL</small> 修饰符，条件为真 <i>true</i> 将比条件为假<i>false</i> 排在前面，下面的例子就会将含
   NULL 的记录排在结果的上面部分：

</p>
<pre>   SELECT *
   FROM tab
   ORDER BY (col IS NOT NULL)
</pre>

<h3> <a name="4.10"></a>4.10) 各种字符类型之间有什么不同？ </h3>
<blockquote>
   <table>
   <tbody>
      <tr><th>类型</th><th>内部名称</th><th>说明</th></tr>

      <tr><td>VARCHAR(n)</td><td>varchar</td><td>指定了最大长度，变长字符串，不足定义长度的部分不补齐</td></tr>
      <tr><td>CHAR(n)</td><td>bpchar</td><td>定长字符串，实际数据不足定义长度时，以空格补齐</td></tr>
      <tr><td>TEXT</td><td>text</td><td>没有特别的上限限制（仅受行的最大长度限制）</td></tr>
      <tr><td>BYTEA</td><td>bytea</td><td>变长字节序列（使用NULL字符也是允许的）</td></tr>

      <tr><td>"char"</td><td>char</td><td>单个字符</td></tr>
      </tbody>
   </table>
</blockquote>

<p>
   在系统表和在一些错误信息里你将看到内部名称。
</p>
<p>
   上面所列的前四种类型是"varlena"（变长）类型（也就是说，开头的四个字节是长度，后面才是数据）。
   于是实际占用的空间比声明的大小要多一些。
   然而这些类型如定义很长时都可以被压缩存储，因此磁盘空间也可能比预想的要少。

</p>
<p>
   <small>VARCHAR(n)</small> 在存储限制了最大长度的变长字符串是最好的。
   <small>TEXT</small> 适用于存储最大可达 1G左右但未定义限制长度的字符串。
</p>
<p>
   <small>CHAR(n)</small> 最适合于存储长度相同的字符串。 <small>CHAR(n)</small>会根据所给定的字段长度以空格补足（不足的字段内容），
   而 <small>VARCHAR(n)</small> 只存储所给定的数据内容。
   <small>BYTEA</small> 用于存储二进制数据，尤其是包含 NULL 字节的值。这些类型具有差不多的性能。

</p>



<h3> <a name="4.11.1"></a>4.11.1) 我怎样创建一个序列号或是自动递增的字段？ </h3>
<p>PostgreSQL 支持 SERIAL 数据类型。（字段定义为SERIAL后）将自动创建一个序列生成器，例如：
</p>
<pre>
   CREATE TABLE person ( 
      id   SERIAL, 
      name TEXT 
   );
</pre>
<p>
   会自动转换为以下SQL语句：
</p>

<pre>
   CREATE SEQUENCE person_id_seq;
   CREATE TABLE person ( 
      id   INT4 NOT NULL DEFAULT nextval('person_id_seq'),
      name TEXT
   );
</pre>
<p>
   参考 create_sequence 手册页获取关于序列生成器的更多信息。
</p>


<h3> <a name="4.11.2"></a>4.11.2) 我如何获得一个插入的序列号的值？ </h3>
<p>
   一种方法是在插入之前先用函数 nextval() 从序列对象里检索出下一个 SERIAL 值，然后再用此值精确地插入。使用
   <a href="#4.11.1"> 4.11.1</a> 里的例表，可用伪码这样描述：

</p>
<pre>
   new_id = execute("SELECT nextval('person_id_seq')");
   execute("INSERT INTO person (id, name) VALUES (new_id, 'Blaise Pascal')");
</pre>
<p>
   这样还能在其他查询中使用存放在 new_id 里的新值（例如，作为参照 person 表的外键）。
   注意自动创建的 SEQUENCE 对象的名称将会是  &lt;<i>table</i>&gt;_&lt;<i>serialcolumn</i>&gt;_<i>seq</i>，
   这里 table 和 serialcolumn 分别是你的表的名称和你的 SERIAL 字段的名称。
</p>
<p>
   类似的，在 SERIAL 对象缺省插入后你可以用函数 currval() 检索刚赋值的 SERIAL 值，例如：

</p>
<pre>
   execute("INSERT INTO person (name) VALUES ('Blaise Pascal')");
   new_id = execute("SELECT currval('person_id_seq')");
</pre>

<h3> <a name="4.11.3"></a>4.11.3) 同时使用 <i>currval()</i> 会导致和其他用户的冲突情况吗？ </h3>
<p>
   不会。<i>currval()</i> 返回的是你本次会话进程所赋的值而不是所有用户的当前值。<br/>

</p>

<h3> <a name="4.11.4"></a>4.11.4) 为什么不在事务异常中止后重用序列号呢？为什么在序列号字段的取值中存在间断呢？ </h3>
<p>
   为了提高并发性，序列号在需要的时候赋予正在运行的事务，并且在事务结束之前不进行锁定，
   这就会导致异常中止的事务后，序列号会出现间隔。
</p>

<h3> <a name="4.12"></a>4.12) 什么是 <small>OID</small> ？什么是 <small>CTID</small> ？ </h3>


<p>PostgreSQL 里创建的每一行记录都会获得一个唯一的<small>OID</small>，除非在创建表时使用<small>WITHOUT OIDS</small>选项。
   <small>OID</small>创建时会自动生成一个4字节的整数，所有 OID 在相应PostgreSQL服务器中均是唯一的。 然而，它在超过40亿时将溢出，
   <small>OID</small>此后会出现重复。PostgreSQL 在它的内部系统表里使用 OID 在表之间建立联系。
</p>
<p>   
   在用户的数据表中，最好是使用<small>SERIAl</small>来代替<small>OID</small>

   因为<small>SERIAL</small>只要保证在单个表中的数值是唯一的就可以了，这样它溢出的可能性就非常小了，
   <small>SERIAL8</small>可用来保存8字节的序列数值。
</p>

<p>
   <small>CTID</small> 用于标识带着数据块（地址）和（块内）偏移的特定的物理行。
   <small>CTID</small> 在记录被更改或重载后发生改变。索引数据使用它们指向物理行。
</p>



<h3> <a name="4.13"></a>4.13) 为什么我收到错误信息“<i>ERROR: Memory exhausted in AllocSetAlloc()</i>”？ </h3>
<p>
   这很可能是系统的虚拟内存用光了，或者内核对某些资源有较低的限制值。在启动 postmaster 之前试试下面的命令：
</p>
<pre>
   ulimit -d 262144
   limit datasize 256m
</pre>
<p>
   取决于你用的 shell，上面命令只有一条能成功，但是它将把你的进程数据段限制设得比较高，
   因而也许能让查询完成。这条命令应用于当前进程，以及所有在这条命令运行后创建的子进程。
   如果你是在运行SQL客户端时因为后台返回了太多的数据而出现问题，请在运行客户端之前执行上述命令。

</p>

<h3> <a name="4.14"></a>4.14) 我如何才能知道所运行的PostgreSQL的版本？ </h3>
<p>
   从 psql 里，输入 <code>SELECT version();</code>指令。
</p>

<h3> <a name="4.15"></a>4.15) 我如何创建一个缺省值是当前时间的字段？ </h3>
<p>
   使用 CURRENT_TIMESTAMP：

</p>
<pre>
   CREATE TABLE test (x int, modtime TIMESTAMP DEFAULT CURRENT_TIMESTAMP );
</pre>


<h3> <a name="4.16"></a>4.16) 我怎样进行 outer join （外连接）？ </h3>
<p>PostgreSQL 采用标准的 SQL 语法支持外连接。这里是两个例子：</p>
<pre>
   SELECT *
   FROM t1 LEFT OUTER JOIN t2 ON (t1.col = t2.col);
</pre>
<p>或是</p>

<pre>
   SELECT *
   FROM t1 LEFT OUTER JOIN t2 USING (col);
</pre>
<p>
   这两个等价的查询在 t1.col 和 t2.col 上做连接，并且返回 t1 中所有未连接的行（那些在 t2 中没有匹配的行）。
   右[外]连接（RIGHT OUTER JOIN）将返回 t2 中未连接的行。
   完全外连接（FULL OUTER JOIN）将返回 t1 和 t2 中未连接的行。
   关键字 OUTER 在左[外]连接、右[外]连接和完全[外]连接中是可选的，普通连接被称为内连接（INNER JOIN）。
</p>


<h3> <a name="4.17"></a>4.17) 如何使用涉及多个数据库的查询？ </h3>
<p>
   没有办法查询当前数据库之外的数据库。
   因为PostgreSQL要加载与数据库相关的系统目录（系统表），因此跨数据库的查询如何执行是不定的。
</p>

<p>
   附加增值模块contrib/dblink允许采用函数调用实现跨库查询。当然用户也可以同时连接到不同的数据库执行查询然后在客户端合并结果。
</p>

<h3> <a name="4.18"></a>4.18) 如何让函数返回多行或多列数据？ </h3>
<p>
   在函数中返回数据记录集的功能是很容易使用的，详情参见：
   <a href="http://techdocs.postgresql.org/guides/SetReturningFunctions">http://techdocs.postgresql.org/guides/SetReturningFunctions</a>
</p>

<h3> <a name="4.19"></a>4.19) 为什么我在使用PL/PgSQL函数存取临时表时会收到错误信息“relation with OID ##### does not exist”？ </h3>

<p>
   PL/PgSQL会缓存函数的脚本内容，由此带来的一个不好的副作用是若一个 PL/PgSQL
    函数访问了一个临时表，然后该表被删除并重建了，则再次调用该函数将失败，
   因为缓存的函数内容仍然指向旧的临时表。解决的方法是在 PL/PgSQL 中用<small>EXECUTE</small>
    对临时表进行访问。这样会保证查询在执行前总会被重新解析。
</p>

<h3> <a name="4.20"></a>4.20) 目前有哪些数据复制方案可用？ </h3>
<p>
   “复制”只是一个术语，有好几种复制技术可用，每种都有优点和缺点：
</p>
<p>

   主/从复制方式是允许一个主服务器接受读/写的申请，而多个从服务器只能接受读/<small>SELECT</small>查询的申请，
   目前最流行且免费的主/从PostgreSQL复制方案是 
   <a href="http://gborg.postgresql.org/project/slony1/projdisplay.php">Slony-I </a>。
</p>
<p>
   多个主服务器的复制方式允许将读/写的申请发送给多台的计算机，这种方式由于需要在多台服务器之间同步数据变动
   可能会带来较严重的性能损失，<a href="http://pgfoundry.org/projects/pgcluster/">Pgcluster</a>是目前这种方案
   中最好的，而且还可以免费下载。
</p>
<p>
   也有一些商业需付费和基于硬件的数据复制方案，支持上述各种复制模型。
</p>


<h3> <a name="4.21">4.21</a>) 为何查询结果显示的表名或列名与我的查询语句中的不同？为何大写状态不能保留？ </h3>

<p>
   最常见的原因是在创建表时对表名或是列名使用了双引号“”，当使用了双引号后，表名或列名（称为标识符）存储时是区分
<a href="http://www.postgresql.org/docs/8.0/static/sql-syntax.html#SQL-SYNTAX-IDENTIFIERS">大小写的</a>，
   这意谓着你在查询时表名或列名也应使用双引号，一些工具软件，像pgAdmin会在发出创建表的指令时自动地在每个标识符上加双引号。
   因此，为了标识符的统一，你应该：
</p>
<ul>
<li>在创建表时避免将标识符使用双引号引起来。</li>
<li>在标识符中只使用小写字母。</li>

<li>（为了与已存在的标识符相同）在查询中使用双引号将标识符引起来。</li>
</ul>

</body>

</html>